<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å‘å¸ƒ - ä¹¦å°çº¢é£æ ¼</title>
  <style>
  :root { --brand:#ff2442; --muted:#666; --soft:#f8f9fb; --border:#e8e8e8; --bg:#fff; }
  *{box-sizing:border-box}
  body{margin:0;font-family:"PingFang SC","Microsoft YaHei",Arial,sans-serif;background:var(--soft);color:#222}

  /* é€šç”¨å¸ƒå±€ï¼ˆä¸é¦–é¡µä¸€è‡´ï¼‰ */
  .layout{display:flex;min-height:100vh}
  .sidebar{width:220px;background:var(--bg);border-right:1px solid var(--border);padding:16px 12px;position:sticky;top:0;height:100vh}
  .logo{display:flex;align-items:center;gap:10px;padding:8px 10px;font-weight:700;color:var(--brand)}
  .nav{margin-top:8px;display:grid;gap:6px}
  .nav-item{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;cursor:pointer;color:#222;text-decoration:none}
  .nav-item:hover{background:#fff1f3}
  .nav-item.active{background:#ffecef;color:var(--brand)}
  .nav-item .icon{width:22px;height:22px;display:inline-flex;align-items:center;justify-content:center;border-radius:6px;color:var(--brand)}
  .main{flex:1;min-width:0}

  /* é¡µé¢è‡ªèº«æ ·å¼ */
  .wrap{max-width:1100px;margin:0 auto;padding:20px}
  .tabs{display:flex;gap:28px;background:var(--bg);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:2}
  .tab{padding:16px 4px;cursor:pointer;color:var(--muted);position:relative}
  .tab.active{color:#222;font-weight:700}
  .tab.active::after{content:"";position:absolute;left:0;right:0;bottom:-1px;height:3px;background:#222;border-radius:2px}

  .notice{background:#fff6e5;border:1px solid #ffe7b3;color:#8a5b00;border-radius:8px;padding:10px 12px;margin:16px 0}

  .card{background:var(--bg);border:1px solid var(--border);border-radius:12px;padding:18px}
  .uploader{border:2px dashed var(--border);border-radius:12px;min-height:340px;display:flex;align-items:center;justify-content:center;flex-direction:column;background:#fafbfc;transition:border-color .2s}
  .uploader.dragover{border-color:var(--brand);background:#fff1f3}
  .cloud{font-size:72px;opacity:.2;margin-bottom:10px}
  .btn{background:var(--brand);color:#fff;border:none;border-radius:8px;padding:10px 18px;cursor:pointer}
  .btn.secondary{background:#fff;color:#222;border:1px solid var(--border)}
  .hint{color:var(--muted);font-size:13px;margin-top:8px}

  .grid{display:grid;grid-template-columns:2fr 1fr;gap:18px;margin-top:16px}
  .preview{background:#000;border-radius:10px;overflow:hidden;display:flex;align-items:center;justify-content:center;min-height:240px}
  .preview video,.preview img{max-width:100%;max-height:360px}

  .form{display:grid;gap:12px}
  .row{display:grid;gap:8px}
  input[type="text"], textarea, select{padding:10px 12px;border:1px solid var(--border);border-radius:8px;outline:none}
  textarea{min-height:110px;font-family:inherit}
  .tips{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin-top:18px}
  .tip{background:var(--bg);border:1px solid var(--border);border-radius:10px;padding:12px;color:var(--muted);font-size:13px}
  .actions{display:flex;gap:10px;align-items:center;margin-top:10px}
  .json{font-family:ui-monospace,SFMono-Regular,Consolas,monospace;font-size:12px;background:#0f172a;color:#e2e8f0;border-radius:8px;padding:10px;white-space:pre-wrap}
  .back{position:fixed;right:18px;bottom:18px}
  </style>
</head>
<body>
  <div class="layout">
    <!-- ä¾§è¾¹æ  -->
    <aside class="sidebar">
      <div class="logo">
        <span style="font-size:20px">ğŸŸ¥</span>
        <span>ä¹¦å°çº¢</span>
      </div>
      <div class="nav">
        <a href="index.html" class="nav-item"><span class="icon">ğŸ </span><span>å‘ç°</span></a>
        <div class="nav-item active"><span class="icon">â•</span><span>å‘å¸ƒ</span></div>
      </div>
    </aside>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <main class="main">
      <div class="wrap">
        <div class="tabs">
          <div class="tab active" data-type="video">ä¸Šä¼ è§†é¢‘</div>
          <div class="tab" data-type="image">ä¸Šä¼ å›¾æ–‡</div>
          <div class="tab" data-type="article">å†™é•¿æ–‡</div>
        </div>

        <div class="notice">ä½ è¿˜æœªç»‘å®šæ‰‹æœºå·ï¼Œå‰å¾€ APP ç«¯ã€è®¾ç½®ã€‘-ã€è´¦æˆ·ä¸å®‰å…¨ã€‘-ã€æ‰‹æœºå·ã€‘ç»‘å®šåæ‰å¯å‘å¸ƒç¬”è®°ã€‚<a href="javascript:void(0)">æˆ‘äº†è§£äº†</a></div>

        <div class="card">
          <div id="drop" class="uploader">
            <div class="cloud">â˜ï¸</div>
            <div>æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤æˆ–</div>
            <div style="margin-top:12px"><button id="pick" class="btn">ä¸Šä¼ {{ label }}</button></div>
            <div class="hint">æ”¯æŒ mp4ã€movï¼ˆæ¨è 720P åŠä»¥ä¸Šï¼‰ï¼Œå•ä¸ªæ–‡ä»¶ â‰¤ 2GB</div>
            <input id="file" type="file" accept="video/*,image/*" hidden>
          </div>

          <div class="grid">
            <div class="preview" id="preview">é¢„è§ˆåŒº</div>
            <div class="form">
              <div class="row">
                <label>æ ‡é¢˜</label>
                <input id="title" type="text" placeholder="å¡«å†™æ ‡é¢˜ï¼Œå¦‚ï¼šå‘¨æœ«vlog/ä»Šæ—¥ç©¿æ­/æ—…è¡Œè®°å½•" />
              </div>
              <div class="row">
                <label>åˆ†ç±»</label>
                <select id="category">
                  <option>æ¨è</option>
                  <option>ç©¿æ­</option>
                  <option>ç¾é£Ÿ</option>
                  <option>å®¶å±…</option>
                  <option>æ—…è¡Œ</option>
                  <option>æ•°ç </option>
                </select>
              </div>
              <div class="row">
                <label>ä½œè€…</label>
                <input id="author" type="text" placeholder="ä½ çš„æ˜µç§°ï¼Œå¦‚ï¼šJoyceå›å›" />
              </div>
              <div class="row">
                <label>å¤´åƒé“¾æ¥ï¼ˆå¯é€‰ï¼‰</label>
                <input id="avatar" type="text" placeholder="https://.../avatar.png" />
              </div>
              <div class="row">
                <label>æ ‡ç­¾ï¼ˆå¯é€‰ï¼‰</label>
                <input id="tag" type="text" placeholder="VLOG / æ–°å“ / åˆ†äº« ç­‰" />
              </div>
              <div class="actions">
                <button id="gen" class="btn">ç”Ÿæˆ JSON æ¡ç›®</button>
                <button id="copy" class="btn secondary">å¤åˆ¶åˆ°å‰ªè´´æ¿</button>
              </div>
              <div id="json" class="json" style="display:none"></div>
            </div>
          </div>

          <div class="tips">
            <div class="tip">
              <b>è§†é¢‘å¤§å°</b><br/>
              æ”¯æŒ 60 åˆ†é’Ÿä»¥å†…ï¼Œå•æ–‡ä»¶æœ€å¤§ 2GBã€‚
            </div>
            <div class="tip">
              <b>è§†é¢‘æ ¼å¼</b><br/>
              æ¨è mp4ã€movï¼›ç½‘é¡µç«¯æ’­æ”¾æ›´ç¨³å®šã€‚
            </div>
            <div class="tip">
              <b>åˆ†è¾¨ç‡</b><br/>
              æ¨è 720Pï¼ˆ1280Ã—720ï¼‰åŠä»¥ä¸Šï¼Œä½“éªŒæ›´ä½³ã€‚
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <a class="back btn" href="index.html">è¿”å›ä¹¦å°çº¢é¦–é¡µ</a>

  <script>
  const state = { type:'video', file:null };
  const tabs = document.querySelectorAll('.tab');
  const drop = document.getElementById('drop');
  const fileInput = document.getElementById('file');
  const pickBtn = document.getElementById('pick');
  const preview = document.getElementById('preview');
  const jsonBox = document.getElementById('json');

  const titleEl = document.getElementById('title');
  const catEl = document.getElementById('category');
  const authorEl = document.getElementById('author');
  const avatarEl = document.getElementById('avatar');
  const tagEl = document.getElementById('tag');

  // åˆ‡æ¢æ ‡ç­¾
  tabs.forEach(t => t.addEventListener('click', () => {
    tabs.forEach(x => x.classList.remove('active'));
    t.classList.add('active');
    state.type = t.dataset.type === 'image' ? 'image' : (t.dataset.type === 'article' ? 'article' : 'video');
    fileInput.accept = state.type==='image' ? 'image/*' : 'video/*,image/*';
    pickBtn.textContent = 'ä¸Šä¼ ' + (state.type==='image' ? 'å›¾ç‰‡' : (state.type==='article' ? 'å°é¢' : 'è§†é¢‘'));
  }));

  // é€‰æ‹©/æ‹–æ‹½
  pickBtn.onclick = () => fileInput.click();
  fileInput.onchange = () => handleFiles(fileInput.files);
  ;['dragenter','dragover'].forEach(evt => drop.addEventListener(evt,e=>{e.preventDefault();drop.classList.add('dragover');}))
  ;['dragleave','drop'].forEach(evt => drop.addEventListener(evt,e=>{e.preventDefault();drop.classList.remove('dragover');}))
  drop.addEventListener('drop', e => handleFiles(e.dataTransfer.files));

  function handleFiles(files){
    if(!files || !files[0]) return;
    const f = files[0];
    state.file = f;
    preview.innerHTML='';
    const url = URL.createObjectURL(f);
    if(f.type.startsWith('image/')){
      const img = new Image(); img.src=url; preview.appendChild(img); state.type='image';
      tabs.forEach(x=>x.classList.remove('active')); document.querySelector('.tab[data-type="image"]').classList.add('active');
    }else{
      const vd = document.createElement('video'); vd.controls=true; vd.src=url; preview.appendChild(vd); state.type='video';
      tabs.forEach(x=>x.classList.remove('active')); document.querySelector('.tab[data-type="video"]').classList.add('active');
    }
  }

  function makeId(){ return Math.floor(Date.now()/1000) }

  document.getElementById('gen').onclick = () => {
    const fileName = state.file ? state.file.name : 'your-file.mp4';
    // å»ºè®®ä½ æŠŠæ–‡ä»¶æ”¾åˆ°é¡¹ç›®æ ¹ç›®å½•çš„ video/ ä¸‹
    const entry = {
      id: makeId(),
      category: catEl.value || 'æ¨è',
      type: state.type === 'image' ? 'image' : 'video',
      src: (state.type==='image' ? 'images/' : 'video/') + fileName,
      title: titleEl.value || (state.type==='image' ? 'ä»Šæ—¥å›¾æ–‡' : 'ä»Šæ—¥VLOG'),
      author: authorEl.value || 'åŒ¿åä½œè€…',
      avatar: avatarEl.value || 'https://i.pravatar.cc/100?img=8',
      likes: Math.floor(Math.random()*3000+200),
      tag: tagEl.value || (state.type==='image' ? 'å›¾æ–‡' : 'VLOG')
    };
    jsonBox.style.display='block';
    jsonBox.textContent = JSON.stringify(entry, null, 2);
  };

  document.getElementById('copy').onclick = async () => {
    if(!jsonBox.textContent){ alert('è¯·å…ˆç”Ÿæˆ JSON æ¡ç›®'); return; }
    try{ await navigator.clipboard.writeText(jsonBox.textContent); alert('å·²å¤åˆ¶ï¼Œç²˜è´´åˆ° videos.json çš„æ•°ç»„é‡Œå³å¯'); }catch(e){ alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©æ–‡æœ¬å¤åˆ¶'); }
  };
  </script>
</body>
</html>
