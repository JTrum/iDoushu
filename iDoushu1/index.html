<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä¹¦å°çº¢ Â· å‘ç°å¥½ç”Ÿæ´»</title>
  <style>
  :root {
    --brand: #ff2442;
    --text: #222;
    --muted: #666;
    --bg: #fff;
    --soft: #f5f6f7;
    --card: #ffffff;
    --border: #eee;
  }
  * { box-sizing: border-box; }
  body { margin: 0; font-family: "PingFang SC", "Microsoft YaHei", Arial, sans-serif; color: var(--text); background: var(--soft); }

  /* å¸ƒå±€ */
  .layout { display: flex; min-height: 100vh; }
  .sidebar { width: 220px; background: var(--bg); border-right: 1px solid var(--border); padding: 16px 12px; position: sticky; top: 0; height: 100vh; }
  .logo { display: flex; align-items: center; gap: 10px; padding: 8px 10px; font-weight: 700; color: var(--brand); }
  .nav { margin-top: 8px; display: grid; gap: 6px; }
  .nav-item { display: flex; align-items: center; gap: 10px; padding: 10px 12px; border-radius: 10px; cursor: pointer; color: var(--text); text-decoration: none; }
  .nav-item:hover { background: #fff1f3; }
  .nav-item.active { background: #ffecef; color: var(--brand); }
  .nav-item .icon { width: 22px; height: 22px; display: inline-flex; align-items: center; justify-content: center; border-radius: 6px; color: var(--brand); }

  .main { flex: 1; min-width: 0; }

  /* é¡¶éƒ¨æ¡ */
  .topbar { position: sticky; top: 0; z-index: 5; background: var(--bg); border-bottom: 1px solid var(--border); }
  .topbar-inner { max-width: 1200px; margin: 0 auto; display: flex; align-items: center; gap: 16px; padding: 12px 20px; }
  .search { flex: 1; display: flex; align-items: center; gap: 8px; background: var(--soft); border-radius: 999px; padding: 10px 14px; }
  .search input { flex: 1; border: none; outline: none; background: transparent; font-size: 14px; }
  .top-links { display: flex; align-items: center; gap: 16px; color: var(--muted); }
  .pill { padding: 6px 12px; border-radius: 999px; background: #fff1f3; color: var(--brand); font-weight: 600; }

  /* æ ‡ç­¾å¯¼èˆª */
  .tabs { max-width: 1200px; margin: 0 auto; display: flex; gap: 18px; padding: 12px 20px; background: var(--bg); }
  .tab { color: var(--muted); cursor: pointer; }
  .tab.active { color: var(--text); font-weight: 700; position: relative; }
  .tab.active::after { content: ""; position: absolute; left: 0; right: 0; bottom: -10px; height: 3px; background: var(--text); border-radius: 2px; }

  /* ç€‘å¸ƒæµ */
  .content { max-width: 1200px; margin: 0 auto; padding: 18px 16px 40px; }
  .waterfall { column-count: 4; column-gap: 16px; }
  @media (max-width: 1200px) { .waterfall { column-count: 3; } .sidebar { width: 200px; } }
  @media (max-width: 900px)  { .waterfall { column-count: 2; } .sidebar { display: none; } .topbar-inner { padding-left: 16px; padding-right: 16px; } .tabs { padding-left: 16px; } }
  @media (max-width: 520px)  { .waterfall { column-count: 1; } }

  .card { break-inside: avoid; background: var(--card); border-radius: 14px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,.05); margin: 0 0 16px; border: 1px solid var(--border); }
  .media { position: relative; width: 100%; }
  .media img, .media video { width: 100%; display: block; }
  .badge { position: absolute; left: 8px; top: 8px; background: rgba(0,0,0,.55); color: #fff; font-size: 12px; padding: 4px 8px; border-radius: 999px; }

  .meta { padding: 12px; }
  .title { font-size: 14px; line-height: 1.4; margin: 0 0 10px; }
  .user { display: flex; align-items: center; justify-content: space-between; }
  .author { display: flex; align-items: center; gap: 8px; color: var(--muted); font-size: 13px; }
  .avatar { width: 24px; height: 24px; border-radius: 50%; object-fit: cover; }
  .like { display: inline-flex; align-items: center; gap: 6px; color: var(--muted); font-size: 13px; cursor: pointer; padding: 6px 8px; border-radius: 999px; }
  .like:hover { background: #fff1f3; color: var(--brand); }
  </style>
</head>
<body>
  <div id="app">
    <div class="layout">
      <!-- å·¦ä¾§å¯¼èˆª -->
      <aside class="sidebar">
        <div class="logo">
          <span style="font-size:20px">ğŸŸ¥</span>
          <span>ä¹¦å°çº¢</span>
        </div>
        <div class="nav">
          <div class="nav-item active"><span class="icon">ğŸ </span><span>å‘ç°</span></div>
          <a href="publish.html" class="nav-item"><span class="icon">â•</span><span>å‘å¸ƒ</span></a>
        </div>
      </aside>

      <!-- ä¸»åŒºåŸŸ -->
      <main class="main">
        <!-- é¡¶éƒ¨æœç´¢ -->
        <div class="topbar">
          <div class="topbar-inner">
            <div class="pill">æ¨è</div>
            <div class="search">
              <span>ğŸ”</span>
              <input v-model="searchQuery" placeholder="æœç´¢ä¹¦å°çº¢" />
            </div>
            <div class="top-links">
              <span>åˆ›ä½œä¸­å¿ƒ</span>
              <span>ä¸šåŠ¡åˆä½œ</span>
            </div>
          </div>
        </div>

        <!-- æ ‡ç­¾å¯¼èˆª -->
        <div class="tabs">
          <div class="tab" :class="{active: activeTab==='æ¨è'}" @click="activeTab='æ¨è'">æ¨è</div>
          <div class="tab" :class="{active: activeTab==='ç©¿æ­'}" @click="activeTab='ç©¿æ­'">ç©¿æ­</div>
          <div class="tab" :class="{active: activeTab==='ç¾é£Ÿ'}" @click="activeTab='ç¾é£Ÿ'">ç¾é£Ÿ</div>
          <div class="tab" :class="{active: activeTab==='å®¶å±…'}" @click="activeTab='å®¶å±…'">å®¶å±…</div>
          <div class="tab" :class="{active: activeTab==='æ—…è¡Œ'}" @click="activeTab='æ—…è¡Œ'">æ—…è¡Œ</div>
          <div class="tab" :class="{active: activeTab==='æ•°ç '}" @click="activeTab='æ•°ç '">æ•°ç </div>
        </div>

        <!-- ç€‘å¸ƒæµå†…å®¹ -->
        <div class="content">
          <div class="waterfall">
            <div v-for="post in visiblePosts" :key="post.id" class="card">
              <div class="media">
                <img v-if="post.type==='image'" :src="post.src" :alt="post.title" loading="lazy">
                <video v-else :src="post.src" controls preload="metadata"></video>
                <div class="badge" v-if="post.tag">{{ post.tag }}</div>
              </div>
              <div class="meta">
                <h3 class="title">{{ post.title }}</h3>
                <div class="user">
                  <div class="author">
                    <img :src="post.avatar" class="avatar" alt="">
                    <span>{{ post.author }}</span>
                  </div>
                  <div class="like" @click="like(post)">â¤ï¸ {{ post.likes }}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>

  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
  <script>
  const { createApp, ref, computed } = Vue;

  function makePosts() {
    const cats = ['æ¨è', 'ç©¿æ­', 'ç¾é£Ÿ', 'å®¶å±…', 'æ—…è¡Œ', 'æ•°ç '];
    const list = [];
    for (let i = 1; i <= 20; i++) {
      const c = cats[i % cats.length];
      const isVideo = i % 5 === 0;
      list.push({
        id: i,
        category: c,
        type: isVideo ? 'video' : 'image',
        src: isVideo
          ? 'https://www.w3schools.com/html/mov_bbb.mp4'
          : `https://picsum.photos/seed/p${i}/3${(i%3)+2}0/5${(i%4)+2}0`,
        title: c + ' Â· ' + ['æ—¥å¸¸VLOG','é«˜åˆ†å¥½ç‰©','å‡ºæ¸¸éšæ‰‹æ‹','ä»Šæ—¥ç©¿æ­','åˆ†äº«æ¸…å•'][i%5],
        author: ['å°å‡ ','é˜¿é»','Joyce','æœ¨æœ¨','å¤æœ¨å—'][i%5],
        avatar: `https://i.pravatar.cc/100?img=${(i%70)+1}`,
        likes: Math.floor(Math.random()*5000+50),
        tag: isVideo ? 'VLOG' : (i%7===0?'æ–°å“':'')
      });
    }
    return list;
  }

  createApp({
    setup() {
      const searchQuery = ref('');
      const activeTab = ref('æ¨è');
      const posts = ref([]);

      // ä»ç‹¬ç«‹æ•°æ®æ–‡ä»¶åŠ è½½
      fetch('videos.json')
        .then(r => { if (!r.ok) throw new Error('load fail'); return r.json(); })
        .then(data => { posts.value = Array.isArray(data) ? data : makePosts(); })
        .catch(() => { posts.value = makePosts(); });

      const filtered = computed(() => {
        const q = searchQuery.value.trim();
        return posts.value.filter(p => {
          const hitTab = activeTab.value === 'æ¨è' || p.category === activeTab.value;
          if (!q) return hitTab;
          return hitTab && (p.title.includes(q) || p.author.includes(q));
        });
      });

      function like(post) { post.likes += 1; }

      return { searchQuery, activeTab, visiblePosts: filtered, like };
    }
  }).mount('#app');
  </script>
</body>
</html>
